<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Virtual Mud</title>
    <meta name="description" content="Hello, WebVR! â€¢ A-Frame">
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-system@1.4.0/dist/aframe-physics-system.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>


<!--This script is new-->
<script>
  // component declaration
  AFRAME.registerComponent("mylink", {
    // define a url in the schema
    schema: {
      href: {}
    },
    init: function() {
      // when clicked - change the location:
      this.el.addEventListener("click", (e) => {
        window.location = this.data.href;
      })
    }
  })
</script>


<script src="https://unpkg.com/aframe-event-set-component@4.0.1/dist/aframe-event-set-component.min.js"></script>

<script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
<a-scene cursor="rayOrigin: mouse" sound="src: #rainforest; on: click; loop: true; volume: 0.2; rolloffFactor: 0" environment="preset: forest; groundTexture: walkernoise; fog: 0.9">

  <a-assets>

    <!-- sound -->

    <audio id="rainforest" src="//cdn.rawgit.com/michaelnebeling/src/master/rainforest_ambience-GlorySunz-1938133500.mp3" crossorigin="anonymous"></audio>

    <audio id="button1" src="//cdn.rawgit.com/michaelnebeling/src/master/button-1.mp3" crossorigin="anonymous"></audio>
    <audio id="button2" src="//cdn.rawgit.com/michaelnebeling/src/master/button-2.mp3" crossorigin="anonymous"></audio>
    <audio id="button3" src="//cdn.rawgit.com/michaelnebeling/src/master/button-3.mp3" crossorigin="anonymous"></audio>
    <audio id="button4" src="//cdn.rawgit.com/michaelnebeling/src/master/button-4.mp3" crossorigin="anonymous"></audio>

    <!-- mixins -->

    <a-mixin id="collider" class="collider" opacity="0.99" event-set__mousedown="material.opacity: 1.0" event-set__mouseenter="material.opacity: 0.9" event-set__mouseleave="material.opacity: 0.99" event-set__mouseup="material.opacity: 0.99"></a-mixin>

  </a-assets>

  <!-- click to begin -->
  <a-text value="Click to begin" position="0 2 -3" align="center"></a-text>

  <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E" shadow mixin="collider" class="collider" sound="src: #button1; on: click; poolSize: 3" sound__mouseenter="src: #button3; on: mouseenter; poolSize: 2"></a-sphere>

  <a-box position="-1 0.5 -3" rotation="0 45 0" width="1" height="1" depth="1" color="#4CC3D9" shadow mixin="collider" class="collider" sound="src: #button1; on: click; poolSize: 3" sound__mouseenter="src: #button3; on: mouseenter; poolSize: 2"></a-box>

  <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D" shadow mixin="collider" class="collider" sound="src: #button1; on: click; poolSize: 3" sound__mouseenter="src: #button3; on: mouseenter; poolSize: 2"></a-cylinder>

  <!--
Let's replace the plane and sky with the A-Frame environment component

  <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4" shadow></a-plane>
  <a-sky color="skyblue"></a-sky>
-->

  <!-- camera & hand controls -->
  <a-entity id="camera-rig">
    <a-entity camera id="head" position="0 1.6 0" wasd-controls look-controls>
    </a-entity>
    <a-entity laser-controls="hand: right" raycaster="objects: .collider; showLine: true" line="color: white; opacity: 0.8" teleport-controls="cameraRig: #camera-rig; teleportOrigin: #head; collisionEntities: .environmentGround .environmentDressing; button: grip" sound="src: #button4; on: teleported"></a-entity>
  </a-entity>

</a-scene>
